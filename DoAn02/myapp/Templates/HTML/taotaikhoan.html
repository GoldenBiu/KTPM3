{% load static %}
<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>T·∫°o t√†i kho·∫£n</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="{% static 'CSS/taotaikhoan.css' %}">

<!--css-->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="{% static 'app/css/style.css' %}" rel="stylesheet" />
<link href="{% static 'app/css/owl.caroysel.min.css' %}" rel="stylesheet" />
<link href="{% static 'app/css/all.min.css' %}" rel="stylesheet" />
<!-- js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

<script src="{% static 'app/js/s3.js' %}"> </script>
<script src="{% static 'app/js/all.min.js' %}"> </script>
<script src="{% static 'app/js/m√Ωcript.js' %}"> </script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
</head>

<body>
<header class="header">
    <div class="menu-toggle">‚ò∞</div>
    <div class="header-title">Nh√† tr·ªç C·∫ßn Th∆°</div>
</header>

<div class="sidebar">
    <div class="logo_content">
        <div class="logo">
            <div class="icon">
                <img src="{% static '/imag/moi.jpg' %}" alt="Logo">
            </div>
            <div class="logo_name">Xin ch√†o, {{ ho_ten_quan_li }}</div>
        </div>
    </div>

    <ul class="nav_list">
        <li>
            <a href="{% url 'menu' %}">
            <span class="icon">üè†</span>
            <span class="link_name">Trang ch·ªß</span>
            </a>
        </li>
        <li>
            <a href="{% url 'quan_ly_khach_hang' %}">
            <span class="icon">üßë‚Äçüíº</span>
            <span class="link_name">Qu·∫£n l√Ω kh√°ch h√†ng</span>
            </a>
        </li>
        <li>
            <a href="{% url 'doanh_thu' %}">
            <span class="icon">üí∞</span>
            <span class="link_name">Doanh thu</span>
            </a>
        </li>
        <li>
            <a href="{% url 'dich_vu' %}">
            <span class="icon">üí°</span>
            <span class="link_name">D·ªãch v·ª•</span>
            </a>
        </li>
        <li>
            <a href="{% url 'hoa_don' %}">
            <span class="icon">üßæ</span>
            <span class="link_name">H√≥a ƒë∆°n</span>
            </a>
        </li>
        <li>
            <a href="{% url 'quan_li_hop_dong' %}">
            <span class="icon">üìÇ</span>
            <span class="link_name">Qu·∫£n l√Ω h·ª£p ƒë·ªìng</span>
            </a>
        </li>
        <li>
            <a href="{% url 'dang_xuat' %}" class="logout-link">
            <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
            <span class="link_name">ƒêƒÉng Xu·∫•t</span>
            </a>
        </li>
        </ul>

</div>

<div class="content flex-grow-1 p-4">
    <div class="con">
        <div id="registerContainer" class="container">
            <div class="cf-title-09">
                <h3><span>ƒêƒÇNG K√ù T√ÄI KHO·∫¢N</span></h3>
            </div>
            
            <form id="registerForm" method="POST" action="{% url 'tao_tai_khoan' khach_hang_id=khach_hang.KhachHangID %}">
                {% csrf_token %}
                <div class="form-container">
                    <div class="form-group">
                        <label>Th√¥ng tin kh√°ch h√†ng</label>
                        <input type="text" id="tenant-name" class="form-control" value="{{ khach_hang.HoTenKhachHang }}" disabled>
                        <input type="text" id="so-day" class="form-control" value="{{ hop_dong.DayPhong }}" disabled>
                        <input type="text" id="so-phong" class="form-control" value="{{ hop_dong.PhongID.SoPhong }}" disabled>
                    </div>

                    <div class="form-group">
                        <label>Nh·∫≠p th√¥ng tin</label>
                        <input type="email" id="email" name="email" class="form-control" placeholder="Nh·∫≠p email" required>
                        <input type="text" id="sdt" name="so_dien_thoai" class="form-control" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" required>
                        <input type="password" id="password" name="mat_khau" class="form-control" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
                    </div>
                </div>
                <button type="submit" class="btn-primary">T·∫°o t√†i kho·∫£n</button>
            </form>
        </div>
    </div>
</div>

{% comment %} <script>
    document.getElementById('registerForm').addEventListener('submit', function(event) {
        event.preventDefault();
        
        let emailValue = document.getElementById('email').value;
        let sdtValue = document.getElementById('sdt').value;
        let password = document.getElementById("password").value;
        
        if (emailValue && sdtValue && password) {
            document.getElementById('displayEmail').textContent = emailValue;
            document.getElementById('displaySdt').textContent = sdtValue;
            document.getElementById("display").textContent = password;
            
            document.getElementById('userInfo').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
        }
    });

    // X·ª≠ l√Ω s·ª± ki·ªán cho n√∫t X√°c nh·∫≠n
    document.getElementById('confirmButton').addEventListener('click', function() {
        console.log('X√°c nh·∫≠n ƒë∆∞·ª£c nh·∫•n');
        // T·∫°o FormData t·ª´ form
        const form = document.getElementById('registerForm');
        const formData = new FormData(form);
        
        // G·ª≠i form b·∫±ng fetch
        fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            }
        })
        .then(response => {
            if (response.ok) {
                console.log('T·∫°o t√†i kho·∫£n th√†nh c√¥ng');
                window.location.href = "{% url 'quan_ly_khach_hang' %}";
            } else {
                throw new Error('Network response was not ok');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('C√≥ l·ªói x·∫£y ra khi t·∫°o t√†i kho·∫£n. Vui l√≤ng th·ª≠ l·∫°i.');
        });
    });
    
    function showSuccessMessage() {
        let messageBox = document.createElement('div');
        messageBox.className = 'success-message';
        messageBox.innerHTML = 'T·∫°o t√†i kho·∫£n th√†nh c√¥ng!';
    
        document.body.appendChild(messageBox);
    
        setTimeout(() => {
            messageBox.style.opacity = '1';
            messageBox.style.transform = 'translateY(0)';
        }, 100);
    
        setTimeout(() => {
            messageBox.style.opacity = '0';
            messageBox.style.transform = 'translateY(-20px)';
            setTimeout(() => messageBox.remove(), 500);
        }, 3000);
    }
</script>

<script>     
    const toggle = document.querySelector('.menu-toggle');
    const sidebar = document.querySelector('.sidebar');

    toggle.addEventListener('click', () => {
        sidebar.classList.toggle('active');
    });
</script> {% endcomment %}
</body>
</html>

